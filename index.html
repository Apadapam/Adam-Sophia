<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sophia + Adam = <3</title>
  <meta name="description" content="A cute website for you." />

  <style>
    :root{
      --bg1: #fff1f6;
      --bg2: #ffe4f2;
      --card: rgba(255,255,255,.78);
      --card2: rgba(255,255,255,.62);
      --text: rgba(25, 10, 20, .92);
      --muted: rgba(25, 10, 20, .62);
      --line: rgba(25,10,20,.12);
      --accent: #ff4da6;
      --accent2: #7c3aed;
      --shadow: 0 14px 34px rgba(20, 0, 10, .18);
      --radius: 18px;
      --max: 980px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color: var(--text);
      background: radial-gradient(1200px 700px at 20% 10%, var(--bg2), transparent 60%),
                  radial-gradient(1100px 700px at 80% 15%, #e8d7ff, transparent 62%),
                  radial-gradient(1000px 700px at 50% 90%, #d9f6ff, transparent 60%),
                  var(--bg1);
      line-height: 1.5;
      overflow-x:hidden;
    }

    body::before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      opacity:.28;
      background-image:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'%3E%3Cpath d='M80 125c-23-18-46-34-46-58 0-14 10-25 24-25 9 0 17 5 22 12 5-7 13-12 22-12 14 0 24 11 24 25 0 24-23 40-46 58z' fill='%23ff4da6' fill-opacity='0.9'/%3E%3Cpath d='M30 52c-9-7-18-13-18-22 0-5 4-10 10-10 4 0 7 2 8 5 2-3 5-5 9-5 6 0 10 5 10 10 0 9-9 15-19 22z' fill='%237c3aed' fill-opacity='0.6'/%3E%3Cpath d='M130 45c-7-5-14-10-14-17 0-4 3-8 8-8 3 0 5 2 6 4 1-2 4-4 7-4 5 0 8 4 8 8 0 7-7 12-15 17z' fill='%23ff4da6' fill-opacity='0.45'/%3E%3C/svg%3E");
      background-size: 160px 160px;
      filter: blur(.2px);
    }

    .wrap{max-width:var(--max); margin:0 auto; padding:26px 18px 70px; position:relative}
    header{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:14px 16px;
      border:1px solid var(--line);
      border-radius:999px;
      background: rgba(255,255,255,.72);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      position: sticky; top: 14px; z-index: 10;
    }
    .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px}
    .heartBadge{
      width:14px; height:14px; border-radius:6px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: 0 0 0 4px rgba(255,77,166,.14);
      transform: rotate(10deg);
    }
    .tiny{color:var(--muted); font-size:13px}

    main{padding:18px 6px}
    .hero{
      padding:26px 2px 8px;
      display:flex; flex-direction:column; gap:8px;
    }
    h1{margin:0; font-size:44px; line-height:1.05}
    @media (max-width: 520px){ h1{font-size:36px} }
    .sub{margin:0; color:var(--muted); max-width: 62ch}

    .grid{
      margin-top:18px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
    }
    @media (max-width: 740px){ .grid{grid-template-columns:1fr} }

    .card{
      border:1px solid var(--line);
      border-radius: var(--radius);
      background: var(--card);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .tile{
      cursor:pointer;
      padding:18px 18px 16px;
      display:flex;
      flex-direction:column;
      gap:10px;
      min-height:150px;
      background:
        radial-gradient(600px 220px at 15% 0%, rgba(255,77,166,.18), transparent 60%),
        radial-gradient(500px 260px at 100% 40%, rgba(124,58,237,.16), transparent 58%),
        var(--card);
      transition: transform .12s ease, border-color .12s ease;
    }
    .tile:hover{
      transform: translateY(-2px);
      border-color: rgba(25,10,20,.22);
    }

    .tileTop{display:flex; align-items:flex-start; justify-content:space-between; gap:12px}
    .tileLeft{display:flex; gap:12px; align-items:flex-start}

    .icon{
      width:44px; height:44px;
      border-radius: 14px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.65);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      flex: 0 0 auto;
      box-shadow: 0 10px 20px rgba(20,0,10,.10);
    }
    .icon img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .iconFallback{
      font-size:20px;
      color: rgba(25,10,20,.75);
      user-select:none;
    }

    .badge{
      font-size:12px;
      padding:6px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      background: rgba(255,255,255,.6);
      color: var(--muted);
      white-space:nowrap;
    }
    .title{margin:0; font-size:18px; font-weight:850}
    .desc{margin:0; color:var(--muted); font-size:14px}
    .arrow{color:var(--muted); font-size:18px; user-select:none}

    .view{
      display:none;
      margin-top:14px;
      padding:18px;
    }
    .view.active{display:block}

    .row{
      display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
      margin-bottom:10px;
    }
    h2{margin:0; font-size:22px}
    .btn{
      appearance:none;
      border:1px solid var(--line);
      background: rgba(255,255,255,.7);
      color: var(--text);
      padding:10px 12px;
      border-radius: 12px;
      cursor:pointer;
      font-weight:800;
      font-size:14px;
      box-shadow: 0 10px 20px rgba(20,0,10,.10);
    }
    .btn:hover{transform: translateY(-1px)}
    .btnPrimary{
      border-color: rgba(255,77,166,.40);
      background: linear-gradient(135deg, rgba(255,77,166,.85), rgba(124,58,237,.55));
      color: rgba(25,10,20,.95);
    }

    .panel{
      border:1px solid var(--line);
      border-radius: var(--radius);
      background: var(--card2);
      padding:14px;
    }
    .muted{color:var(--muted)}

    .timeline{
      position:relative;
      padding-left: 18px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    .timeline::before{
      content:"";
      position:absolute;
      left: 9px;
      top: 8px;
      bottom: 8px;
      width: 3px;
      border-radius: 999px;
      background: linear-gradient(var(--accent), rgba(124,58,237,.55));
      opacity: .55;
    }
    .moment{
      position:relative;
      display:grid;
      grid-template-columns: 140px 1fr;
      gap:12px;
      padding:12px;
      border:1px solid var(--line);
      border-radius: 16px;
      background: rgba(255,255,255,.70);
      box-shadow: 0 10px 20px rgba(20,0,10,.08);
      align-items:start;
    }
    @media (max-width: 620px){
      .moment{grid-template-columns:1fr}
    }
    .moment::before{
      content:"";
      position:absolute;
      left: -1px;
      top: 18px;
      width: 14px;
      height: 14px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: 0 0 0 4px rgba(255,77,166,.16);
      transform: translateX(-18px);
    }

    .momentMedia{
      border-radius: 14px;
      border:1px dashed rgba(25,10,20,.18);
      background: rgba(255,255,255,.75);
      overflow:hidden;
      min-height:110px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .momentMedia img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .momentPlaceholder{
      font-weight:900;
      color: rgba(25,10,20,.55);
      font-size:13px;
      text-align:center;
      padding:10px;
    }

    .momentBody{
      padding:4px 6px;
      display:flex;
      flex-direction:column;
      gap:8px;
      min-width:0;
    }

    .momentTop{
      display:flex;
      gap:10px;
      align-items:baseline;
      flex-wrap:wrap;
    }
    .dateTag{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.75);
      color: var(--muted);
      font-weight:800;
      white-space:nowrap;
    }
    .momentTitle{margin:0; font-weight:900}
    .momentNote{margin:0; color:var(--muted)}

    .hint{
      font-size:13px;
      color: var(--muted);
      margin: 10px 0 0;
    }

    .storyScroller{
      max-height: 72vh;
      overflow:auto;
      padding-right: 6px;
      scroll-behavior:smooth;
      -webkit-overflow-scrolling: touch;
    }
    .storyScroller::-webkit-scrollbar{ width: 10px }
    .storyScroller::-webkit-scrollbar-thumb{
      background: rgba(25,10,20,.18);
      border-radius: 999px;
      border: 2px solid rgba(255,255,255,.6);
    }

    .storyQuick{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-bottom: 12px;
    }
    .pillSmall{
      font-size:12px;
      padding:6px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      background: rgba(255,255,255,.7);
      color: var(--muted);
      font-weight:800;
    }

    .gameWrap{display:grid; gap:12px;}
    .chooser{display:flex; gap:10px; flex-wrap:wrap; align-items:center;}
    .chooser .pill{
      font-size:12px;
      padding:6px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      background: rgba(255,255,255,.7);
      color: var(--muted);
      font-weight:800;
    }
    canvas{
      width:100%;
      height:auto;
      border-radius: 16px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.65);
      box-shadow: 0 14px 30px rgba(20,0,10,.10);
      touch-action: none;
    }
    .controls{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
    }
    .hidden{display:none}

    input[type="text"]{
      width:100%;
      padding:12px 12px;
      border-radius: 12px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.75);
      color: var(--text);
      font: inherit;
      outline:none;
    }
    .two{
      display:grid; grid-template-columns: 1fr auto; gap:10px;
      align-items:center;
    }
    @media (max-width: 520px){ .two{grid-template-columns:1fr} }

    footer{
      margin-top:22px;
      padding:16px 4px 0;
      border-top:1px solid var(--line);
      color: var(--muted);
      display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
    }
    .footerPill{
      font-size:12px;
      padding:6px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      background: rgba(255,255,255,.65);
      color: var(--muted);
      font-weight:800;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <span class="heartBadge"></span>
        <span>Sophia + Adam = <3</span>
      </div>
      <div class="tiny" id="today"></div>
    </header>

    <main>
      <section id="home" class="hero">
        <h1>Hi Pookie</h1>
        <p class="sub">
          Happy Valentine's baby! I am, indeed, a nerd, so I decided to make a website for us. Feel free to look around. I hope you have a good time exploring it. Have fun!.
        </p>

        <div class="grid">
          <div class="card tile" role="button" tabindex="0" data-open="storyView" aria-label="Open Our Story">
            <div class="tileTop">
              <div class="tileLeft">
                <div class="icon">
                  <img src="assets/story.png" alt="" onerror="this.remove(); this.parentElement.innerHTML='<span class=iconFallback>üíñ</span>';">
                </div>
                <div>
                  <p class="title">Our Story</p>
                  <p class="desc">The moments in which time goes by way too fast</p>
                </div>
              </div>
              <span class="badge">Click</span>
            </div>
            <div class="arrow">‚Ä∫</div>
          </div>

          <div class="card tile" role="button" tabindex="0" data-open="gameView" aria-label="Open game">
            <div class="tileTop">
              <div class="tileLeft">
                <div class="icon">
                  <img src="assets/game.png" alt="" onerror="this.remove(); this.parentElement.innerHTML='<span class=iconFallback>üèì</span>';">
                </div>
                <div>
                  <p class="title">Game</p>
                  <p class="desc">Since we are both competitive and hate to lose, why not get mad while trying to set a new record at this game?</p>
                </div>
              </div>
              <span class="badge">Click</span>
            </div>
            <div class="arrow">‚Ä∫</div>
          </div>

          <div class="card tile" role="button" tabindex="0" data-open="infoView" aria-label="Open info">
            <div class="tileTop">
              <div class="tileLeft">
                <div class="icon">
                  <img src="assets/info.png" alt="" onerror="this.remove(); this.parentElement.innerHTML='<span class=iconFallback>üíå</span>';">
                </div>
                <div>
                  <p class="title">Poems</p>
                  <p class="desc">Homemade art from two hopeless romantics</p>
                </div>
              </div>
              <span class="badge">Click</span>
            </div>
            <div class="arrow">‚Ä∫</div>
          </div>

          <div class="card tile" role="button" tabindex="0" data-open="futureView" aria-label="Open future">
            <div class="tileTop">
              <div class="tileLeft">
                <div class="icon">
                  <img src="assets/future.png" alt="" onerror="this.remove(); this.parentElement.innerHTML='<span class=iconFallback>‚ú®</span>';">
                </div>
                <div>
                  <p class="title">What's next?</p>
                  <p class="desc">Plans, wishes, the dream life of you and me</p>
                </div>
              </div>
              <span class="badge">Click</span>
            </div>
            <div class="arrow">‚Ä∫</div>
          </div>
        </div>
      </section>

      <section id="storyView" class="card view" aria-label="Our Story view">
        <div class="row">
          <h2>Our Story</h2>
          <button class="btn" data-back>Back</button>
        </div>

        <div class="panel storyQuick" aria-label="Story quick help">
          <span class="pillSmall">I don't know about you, but I always like to go back and remember the moments we have shared. I do miss it a lot and part of me would love to relive it, but I am happy we keep on working on our story. This is just the beginning of an endless list.</span>
        </div>

        <div class="panel timeline storyScroller" id="storyTimeline">
          <div class="moment" id="m1">
            <div class="momentMedia">
              <img src="assets/story/01.jpg" alt="" loading="lazy"
                   onerror="this.remove(); this.parentElement.innerHTML='<div class=momentPlaceholder>Photo slot 1<br>assets/story/01.jpg</div>';">
            </div>
            <div class="momentBody">
              <div class="momentTop">
                <span class="dateTag">11-04-2025</span>
                <p class="momentTitle">The Night We Met</p>
              </div>
              <p class="momentNote">No amount of loud music could prevent me from hearing your laugh. Feeling like we were in a movie scene: your eyes, smile, the way you danced and your energy made it the most special night of my life. All we wanted was to dance and have a good time, crack the most stupid jokes and not care too much, but little did we know it was the beginning of a truly special journey.</p>
            </div>
          </div>

          <div class="moment" id="m2">
            <div class="momentMedia">
              <img src="assets/story/02.jpg" alt="" loading="lazy"
                   onerror="this.remove(); this.parentElement.innerHTML='<div class=momentPlaceholder>Photo slot 2<br>assets/story/02.jpg</div>';">
            </div>
            <div class="momentBody">
              <div class="momentTop">
                <span class="dateTag">After several weeks</span>
                <p class="momentTitle">Getting to Know Each Other</p>
              </div>
              <p class="momentNote">Although we did not know each other well, we both loved enjoying time together. Minutes turned into hours way too quickly, and life could not stop, but the first hug after returning from work and the first morning kiss made it all special.</p>
            </div>
          </div>

          <div class="moment" id="m3">
            <div class="momentMedia">
              <img src="assets/story/03.jpg" alt="" loading="lazy"
                   onerror="this.remove(); this.parentElement.innerHTML='<div class=momentPlaceholder>Photo slot 3<br>assets/story/03.jpg</div>';">
            </div>
            <div class="momentBody">
              <div class="momentTop">
                <span class="dateTag">YYYY-MM-DD</span>
                <p class="momentTitle">Moment 3 title</p>
              </div>
              <p class="momentNote">Your text here.</p>
            </div>
          </div>

          <div class="moment" id="m4">
            <div class="momentMedia">
              <img src="assets/story/04.jpg" alt="" loading="lazy"
                   onerror="this.remove(); this.parentElement.innerHTML='<div class=momentPlaceholder>Photo slot 4<br>assets/story/04.jpg</div>';">
            </div>
            <div class="momentBody">
              <div class="momentTop">
                <span class="dateTag">YYYY-MM-DD</span>
                <p class="momentTitle">Moment 4 title</p>
              </div>
              <p class="momentNote">Your text here.</p>
            </div>
          </div>

          <div class="moment" id="m5">
            <div class="momentMedia">
              <img src="assets/story/05.jpg" alt="" loading="lazy"
                   onerror="this.remove(); this.parentElement.innerHTML='<div class=momentPlaceholder>Photo slot 5<br>assets/story/05.jpg</div>';">
            </div>
            <div class="momentBody">
              <div class="momentTop">
                <span class="dateTag">YYYY-MM-DD</span>
                <p class="momentTitle">Moment 5 title</p>
              </div>
              <p class="momentNote">Your text here.</p>
            </div>
          </div>

          <div class="moment" id="m6">
            <div class="momentMedia">
              <img src="assets/story/06.jpg" alt="" loading="lazy"
                   onerror="this.remove(); this.parentElement.innerHTML='<div class=momentPlaceholder>Photo slot 6<br>assets/story/06.jpg</div>';">
            </div>
            <div class="momentBody">
              <div class="momentTop">
                <span class="dateTag">YYYY-MM-DD</span>
                <p class="momentTitle">Moment 6 title</p>
              </div>
              <p class="momentNote">Your text here.</p>
            </div>
          </div>

          <div class="moment" id="m7">
            <div class="momentMedia">
              <img src="assets/story/07.jpg" alt="" loading="lazy"
                   onerror="this.remove(); this.parentElement.innerHTML='<div class=momentPlaceholder>Photo slot 7<br>assets/story/07.jpg</div>';">
            </div>
            <div class="momentBody">
              <div class="momentTop">
                <span class="dateTag">YYYY-MM-DD</span>
                <p class="momentTitle">Moment 7 title</p>
              </div>
              <p class="momentNote">Your text here.</p>
            </div>
          </div>

          <div class="moment" id="m8">
            <div class="momentMedia">
              <img src="assets/story/08.jpg" alt="" loading="lazy"
                   onerror="this.remove(); this.parentElement.innerHTML='<div class=momentPlaceholder>Photo slot 8<br>assets/story/08.jpg</div>';">
            </div>
            <div class="momentBody">
              <div class="momentTop">
                <span class="dateTag">YYYY-MM-DD</span>
                <p class="momentTitle">Moment 8 title</p>
              </div>
              <p class="momentNote">Your text here.</p>
            </div>
          </div>

          <div class="moment" id="m9">
            <div class="momentMedia">
              <img src="assets/story/09.jpg" alt="" loading="lazy"
                   onerror="this.remove(); this.parentElement.innerHTML='<div class=momentPlaceholder>Photo slot 9<br>assets/story/09.jpg</div>';">
            </div>
            <div class="momentBody">
              <div class="momentTop">
                <span class="dateTag">YYYY-MM-DD</span>
                <p class="momentTitle">Moment 9 title</p>
              </div>
              <p class="momentNote">Your text here.</p>
            </div>
          </div>

          <div class="moment" id="m10">
            <div class="momentMedia">
              <img src="assets/story/10.jpg" alt="" loading="lazy"
                   onerror="this.remove(); this.parentElement.innerHTML='<div class=momentPlaceholder>Photo slot 10<br>assets/story/10.jpg</div>';">
            </div>
            <div class="momentBody">
              <div class="momentTop">
                <span class="dateTag">YYYY-MM-DD</span>
                <p class="momentTitle">Moment 10 title</p>
              </div>
              <p class="momentNote">Your text here.</p>
            </div>
          </div>
        </div>

        <p class="hint">
        </p>
      </section>

      <section id="gameView" class="card view" aria-label="Game view">
        <div class="row">
          <h2>Flappy Love</h2>
          <button class="btn" data-back>Back</button>
        </div>

        <div class="panel gameWrap">
          <div id="pickScreen">
            <p class="muted" style="margin-top:0">
              Pick your player first. Upload these files to your repo:
              <b>assets/adam.png</b> and <b>assets/sophia.png</b>
            </p>

            <div class="chooser">
              <button class="btn btnPrimary" id="pickAdam" type="button">Play as Adam</button>
              <button class="btn btnPrimary" id="pickSophia" type="button">Play as Sophia</button>
              <span class="pill">Tap, click, or press Space to flap</span>
            </div>
          </div>

          <div id="flappyScreen" class="hidden">
            <div class="controls">
              <div class="chooser">
                <span class="pill">Score: <b id="score">0</b></span>
                <span class="pill">Best: <b id="best">0</b></span>
                <span class="pill" id="difficultyPill">Easy</span>
              </div>
              <div class="chooser">
                <button class="btn" id="pauseBtn" type="button">Pause</button>
                <button class="btn" id="restartBtn" type="button">Restart</button>
                <button class="btn" id="changePlayerBtn" type="button">Change player</button>
              </div>
            </div>

            <canvas id="flappy" width="900" height="520" aria-label="Flappy game canvas"></canvas>

            <p class="hint">
              Tip: tap the canvas to flap. If faces do not show, double check filenames in the assets folder.
            </p>
          </div>
        </div>
      </section>

      <section id="infoView" class="card view" aria-label="Info view">
        <div class="row">
          <h2>Info</h2>
          <button class="btn" data-back>Back</button>
        </div>

        <div class="panel">
          <p style="margin-top:0"><b>Message</b></p>
          <p class="muted" style="margin-top:0">
            Write your message here. Example: I love you, I am proud of you, and I feel lucky to have you.
          </p>

          <div style="height:10px"></div>

          <p style="margin:0"><b>Cute facts</b></p>
          <ul class="muted" style="margin:8px 0 0; padding-left:18px">
            <li>Your laugh is my favorite sound.</li>
            <li>I love how safe it feels to be with you.</li>
            <li>I want a million tiny days with you.</li>
          </ul>
        </div>
      </section>

      <section id="futureView" class="card view" aria-label="Future view">
        <div class="row">
          <h2>Future</h2>
          <button class="btn" data-back>Back</button>
        </div>

        <div class="panel">
          <p class="muted" style="margin-top:0">
            Add plans and a countdown to the next date.
          </p>

          <div class="panel" style="background: rgba(255,255,255,.70)">
            <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center">
              <span class="footerPill">Next date: <b id="nextDateLabel">2026-02-14</b></span>
              <span class="footerPill">Days left: <b id="daysLeft">0</b></span>
            </div>
          </div>

          <div style="height:10px"></div>

          <ul class="muted" style="margin:0; padding-left:18px">
            <li>Plan: picnic + photos</li>
            <li>Plan: cook dinner together</li>
            <li>Plan: weekend trip</li>
          </ul>

          <div style="height:12px"></div>

          <div class="panel" style="background: rgba(255,255,255,.70)">
            <p style="margin:0 0 8px"><b>Change next date</b></p>
            <div class="two">
              <input id="nextDateInput" type="text" placeholder="YYYY-MM-DD" />
              <button class="btn" id="setNextDate" type="button">Set</button>
            </div>
            <p class="muted" style="margin:8px 0 0; font-size:13px">
              This saves only in this browser.
            </p>
          </div>
        </div>
      </section>

      <footer>
        <span class="footerPill">Made with love</span>
        <span class="footerPill" id="footYear">¬©</span>
      </footer>
    </main>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);

    function fmtToday(){
      const now = new Date();
      return now.toLocaleDateString(undefined, { weekday:"short", year:"numeric", month:"short", day:"numeric" });
    }

    function showHome(){
      $("home").classList.remove("hidden");
      document.querySelectorAll(".view").forEach(v => v.classList.remove("active"));
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function openView(viewId){
      $("home").classList.add("hidden");
      document.querySelectorAll(".view").forEach(v => v.classList.remove("active"));
      $(viewId).classList.add("active");
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function wireTiles(){
      document.querySelectorAll("[data-open]").forEach(tile => {
        const openId = tile.getAttribute("data-open");
        const go = () => openView(openId);

        tile.addEventListener("click", go);
        tile.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") go();
        });
      });

      document.querySelectorAll("[data-back]").forEach(btn => {
        btn.addEventListener("click", () => {
          stopFlappy();
          showHome();
        });
      });
    }

    const NEXT_KEY = "pookie_next_date_v2";
    function getNextDate(){
      return localStorage.getItem(NEXT_KEY) || "2026-02-14";
    }
    function setNextDate(raw){
      localStorage.setItem(NEXT_KEY, raw);
    }
    function daysBetween(a,b){
      const ms = 24*60*60*1000;
      const start = new Date(a.getFullYear(), a.getMonth(), a.getDate());
      const end = new Date(b.getFullYear(), b.getMonth(), b.getDate());
      return Math.round((end - start) / ms);
    }
    function updateFuture(){
      const raw = getNextDate();
      $("nextDateLabel").textContent = raw;

      const now = new Date();
      const target = new Date(raw + "T00:00:00");
      const left = daysBetween(now, target);
      $("daysLeft").textContent = String(Math.max(0, left));
    }

    // Flappy game
    const canvas = $("flappy");
    const ctx = canvas.getContext("2d");

    const imgAdam = new Image();
    const imgSophia = new Image();
    imgAdam.src = "assets/adam.png";
    imgSophia.src = "assets/sophia.png";

    let running = false;
    let paused = false;
    let rafId = 0;

    const BEST_KEY = "pookie_flappy_best_v1";

    const state = {
      player: "adam",
      score: 0,
      best: 0,
      started: false,
      gameOver: false,
      lastT: 0,
      elapsed: 0
    };

    function clamp(v, a, b){ return Math.max(a, Math.min(b, v)); }

    function loadBest(){
      const raw = localStorage.getItem(BEST_KEY);
      const n = raw ? parseInt(raw, 10) : 0;
      state.best = Number.isFinite(n) ? n : 0;
      $("best").textContent = String(state.best);
    }
    function saveBest(){
      localStorage.setItem(BEST_KEY, String(state.best));
    }

    const game = {
      bird: { x: 230, y: 260, vy: 0, r: 22 },
      gravity: 1500,
      flap: -520,
      pipeW: 74,
      pipes: [],
      spawnTimer: 0,
      base: { speed: 255, gap: 190, interval: 1.55 },
      cur:  { speed: 255, gap: 190, interval: 1.55 }
    };

    function difficultyLabel(){
      if(state.elapsed < 18) return "Easy";
      if(state.elapsed < 40) return "Medium";
      if(state.elapsed < 70) return "Hard";
      return "Chaos";
    }

    function resetFlappy(){
      state.score = 0;
      $("score").textContent = "0";
      $("difficultyPill").textContent = "Easy";

      state.started = false;
      state.gameOver = false;
      state.elapsed = 0;

      game.bird.x = 230;
      game.bird.y = canvas.height * 0.5;
      game.bird.vy = 0;

      game.pipes = [];
      game.spawnTimer = 0;

      game.cur.speed = game.base.speed;
      game.cur.gap = game.base.gap;
      game.cur.interval = game.base.interval;

      paused = false;
      $("pauseBtn").textContent = "Pause";
    }

    function startFlappy(player){
      state.player = player;

      $("pickScreen").classList.add("hidden");
      $("flappyScreen").classList.remove("hidden");

      loadBest();
      resetFlappy();

      running = true;
      state.lastT = 0;
      cancelAnimationFrame(rafId);
      rafId = requestAnimationFrame(loop);
    }

    function stopFlappy(){
      running = false;
      paused = false;
      cancelAnimationFrame(rafId);

      $("flappyScreen").classList.add("hidden");
      $("pickScreen").classList.remove("hidden");
    }

    function flap(){
      if(!running) return;
      if(state.gameOver) return;

      if(!state.started){
        state.started = true;
        game.bird.vy = game.flap * 0.75;
        return;
      }
      game.bird.vy = game.flap;
    }

    function circleRectHit(cx, cy, cr, rx, ry, rw, rh){
      const closestX = clamp(cx, rx, rx + rw);
      const closestY = clamp(cy, ry, ry + rh);
      const dx = cx - closestX;
      const dy = cy - closestY;
      return (dx*dx + dy*dy) <= cr*cr;
    }

    function spawnPipe(){
      const topMargin = 70;
      const bottomMargin = 70;
      const gap = game.cur.gap;

      const usable = canvas.height - topMargin - bottomMargin - gap;
      const gapTop = topMargin + Math.random() * Math.max(10, usable);

      game.pipes.push({
        x: canvas.width + 40,
        gapTop,
        gapH: gap,
        passed: false
      });
    }

    function rampDifficulty(){
      const t = state.elapsed;

      const speed = game.base.speed + t * 2.35;
      const gap = game.base.gap - t * 0.85;
      const interval = game.base.interval - t * 0.006;

      game.cur.speed = clamp(speed, game.base.speed, 520);
      game.cur.gap = clamp(gap, 118, game.base.gap);
      game.cur.interval = clamp(interval, 0.92, game.base.interval);

      $("difficultyPill").textContent = difficultyLabel();
    }

    function update(dt){
      if(paused) return;
      if(state.gameOver) return;

      if(!state.started){
        game.bird.vy = 0;
        game.bird.y += Math.sin(performance.now() / 240) * 0.35;
        game.bird.y = clamp(game.bird.y, 70, canvas.height - 70);
        return;
      }

      state.elapsed += dt;
      rampDifficulty();

      game.bird.vy += game.gravity * dt;
      game.bird.y += game.bird.vy * dt;

      game.spawnTimer += dt;
      if(game.spawnTimer >= game.cur.interval){
        game.spawnTimer = 0;
        spawnPipe();
      }

      for(const p of game.pipes){
        p.x -= game.cur.speed * dt;

        if(!p.passed && p.x + game.pipeW < game.bird.x - game.bird.r){
          p.passed = true;
          state.score += 1;
          $("score").textContent = String(state.score);
          if(state.score > state.best){
            state.best = state.score;
            $("best").textContent = String(state.best);
            saveBest();
          }
        }
      }

      game.pipes = game.pipes.filter(p => p.x > -game.pipeW - 80);

      const ceiling = 50;
      const floor = canvas.height - 50;

      if(game.bird.y - game.bird.r <= ceiling){
        game.bird.y = ceiling + game.bird.r;
        game.bird.vy = 0;
      }
      if(game.bird.y + game.bird.r >= floor){
        state.gameOver = true;
      }

      for(const p of game.pipes){
        const topRect = { x: p.x, y: 0, w: game.pipeW, h: p.gapTop };
        const botRect = { x: p.x, y: p.gapTop + p.gapH, w: game.pipeW, h: canvas.height - (p.gapTop + p.gapH) };

        if(
          circleRectHit(game.bird.x, game.bird.y, game.bird.r, topRect.x, topRect.y, topRect.w, topRect.h) ||
          circleRectHit(game.bird.x, game.bird.y, game.bird.r, botRect.x, botRect.y, botRect.w, botRect.h)
        ){
          state.gameOver = true;
          break;
        }
      }
    }

    function heartPath(cx, cy, s){
      ctx.beginPath();
      ctx.moveTo(cx, cy + s * 0.6);
      ctx.bezierCurveTo(cx - s, cy - s * 0.2, cx - s * 1.4, cy + s * 1.2, cx, cy + s * 1.8);
      ctx.bezierCurveTo(cx + s * 1.4, cy + s * 1.2, cx + s, cy - s * 0.2, cx, cy + s * 0.6);
      ctx.closePath();
    }

    function drawSoftHearts(){
      ctx.save();
      ctx.globalAlpha = 0.18;
      for(let i=0;i<14;i++){
        const x = (i * 75 + (state.score * 11) % 75) % canvas.width;
        const y = (i * 48 + (state.score * 7) % 52) % canvas.height;
        ctx.fillStyle = "#ff4da6";
        heartPath(x + 60, y + 34, 10 + (i%3)*2);
        ctx.fill();
      }
      ctx.restore();
    }

    function drawObstacle(p){
      const x = p.x;
      const w = game.pipeW;

      const topH = p.gapTop;
      const bottomY = p.gapTop + p.gapH;
      const bottomH = canvas.height - bottomY;

      ctx.save();

      ctx.shadowColor = "rgba(0,0,0,0.18)";
      ctx.shadowBlur = 10;
      ctx.shadowOffsetY = 4;

      ctx.fillStyle = "#ff4da6";
      ctx.strokeStyle = "rgba(255,255,255,0.95)";
      ctx.lineWidth = 3;

      ctx.beginPath();
      ctx.rect(x, 0, w, topH);
      ctx.fill();
      ctx.stroke();

      ctx.beginPath();
      ctx.rect(x, bottomY, w, bottomH);
      ctx.fill();
      ctx.stroke();

      ctx.shadowColor = "transparent";
      ctx.fillStyle = "rgba(255,255,255,0.22)";
      ctx.fillRect(x + 8, 0, 8, topH);
      ctx.fillRect(x + 8, bottomY, 8, bottomH);

      ctx.restore();
    }

    function drawPipes(){
      for(const p of game.pipes){
        drawObstacle(p);
      }
    }

    function drawBird(){
      const img = (state.player === "adam") ? imgAdam : imgSophia;

      ctx.save();
      ctx.fillStyle = "rgba(255,255,255,.80)";
      ctx.strokeStyle = "rgba(25,10,20,.14)";
      ctx.lineWidth = 1;

      ctx.beginPath();
      ctx.arc(game.bird.x, game.bird.y, game.bird.r + 6, 0, Math.PI*2);
      ctx.closePath();
      ctx.fill();
      ctx.stroke();

      ctx.beginPath();
      ctx.arc(game.bird.x, game.bird.y, game.bird.r + 2, 0, Math.PI*2);
      ctx.closePath();
      ctx.clip();

      if(img.complete && img.naturalWidth > 0){
        const s = (game.bird.r + 6) * 2.2;
        ctx.drawImage(img, game.bird.x - s/2, game.bird.y - s/2, s, s);
      }else{
        ctx.fillStyle = "rgba(25,10,20,.55)";
        ctx.font = "900 18px system-ui, -apple-system, Segoe UI, Roboto, Arial";
        ctx.textAlign = "center";
        ctx.fillText(state.player === "adam" ? "A" : "S", game.bird.x, game.bird.y + 6);
      }

      ctx.restore();
    }

    function draw(){
      ctx.clearRect(0,0,canvas.width,canvas.height);

      ctx.save();
      const g = ctx.createLinearGradient(0,0,canvas.width,canvas.height);
      g.addColorStop(0, "rgba(255,255,255,.78)");
      g.addColorStop(1, "rgba(255,255,255,.60)");
      ctx.fillStyle = g;
      ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.restore();

      drawSoftHearts();
      drawPipes();
      drawBird();

      ctx.save();
      ctx.fillStyle = "rgba(25,10,20,.70)";

      if(!state.started && !state.gameOver){
        ctx.textAlign = "center";
        ctx.font = "900 26px system-ui, -apple-system, Segoe UI, Roboto, Arial";
        ctx.fillText("Tap to start", canvas.width/2, canvas.height/2 - 14);
        ctx.font = "800 16px system-ui, -apple-system, Segoe UI, Roboto, Arial";
        ctx.fillText("Then keep tapping to stay up", canvas.width/2, canvas.height/2 + 14);
      }

      if(paused){
        ctx.textAlign = "center";
        ctx.font = "900 40px system-ui, -apple-system, Segoe UI, Roboto, Arial";
        ctx.fillText("Paused", canvas.width/2, canvas.height/2);
      }

      if(state.gameOver){
        ctx.textAlign = "center";
        ctx.font = "900 40px system-ui, -apple-system, Segoe UI, Roboto, Arial";
        ctx.fillText("Game over", canvas.width/2, canvas.height/2 - 10);
        ctx.font = "900 18px system-ui, -apple-system, Segoe UI, Roboto, Arial";
        ctx.fillText("Press Restart or tap", canvas.width/2, canvas.height/2 + 22);
      }

      ctx.restore();
    }

    function loop(t){
      if(!running) return;
      if(!state.lastT) state.lastT = t;
      const dt = Math.min(0.033, (t - state.lastT) / 1000);
      state.lastT = t;

      update(dt);
      draw();

      rafId = requestAnimationFrame(loop);
    }

    window.addEventListener("keydown", (e) => {
      if(e.key === " "){
        if(state.gameOver){
          resetFlappy();
          state.started = true;
        }
        flap();
        e.preventDefault();
      }
      if(e.key === "p" || e.key === "P"){
        paused = !paused;
        $("pauseBtn").textContent = paused ? "Resume" : "Pause";
        e.preventDefault();
      }
    }, { passive:false });

    canvas.addEventListener("pointerdown", (e) => {
      if(!running) return;
      canvas.setPointerCapture(e.pointerId);
      if(state.gameOver){
        resetFlappy();
        state.started = true;
      }
      flap();
    });

    function init(){
      $("today").textContent = fmtToday();
      $("footYear").textContent = "¬© " + new Date().getFullYear();

      wireTiles();

      updateFuture();
      $("setNextDate").addEventListener("click", () => {
        const raw = $("nextDateInput").value.trim();
        if(!/^\d{4}-\d{2}-\d{2}$/.test(raw)){
          alert("Please use YYYY-MM-DD");
          return;
        }
        setNextDate(raw);
        $("nextDateInput").value = "";
        updateFuture();
      });
      setInterval(updateFuture, 60 * 1000);

      $("pickAdam").addEventListener("click", () => startFlappy("adam"));
      $("pickSophia").addEventListener("click", () => startFlappy("sophia"));

      $("pauseBtn").addEventListener("click", () => {
        paused = !paused;
        $("pauseBtn").textContent = paused ? "Resume" : "Pause";
      });

      $("restartBtn").addEventListener("click", () => {
        resetFlappy();
        state.started = true;
        flap();
      });

      $("changePlayerBtn").addEventListener("click", () => {
        stopFlappy();
      });
    }

    init();
  </script>
</body>
</html>
